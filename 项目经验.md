
# 项目经验

## 【HIKMICRO Viewer 微影热视】
项目简介：
用户可以通过 App 连接测温产品硬件设备，支持热成像、可见光和双光融合画面的实时预览，并能在画面中添加自定义的点、线和框等测温规则，可将画面保存为图片(后续可再次进行离线编辑实现二次测温)和视频文件，还支持对测温设备列表的管理和设备在线升级，功能包括图库管理，预览画面的伪彩设置，最高、最低和中心温度点的显隐配置，预览时候支持配置高、低温报警，另外还包括发射率、距离、ISP 图像风格等参数配置

技术描述：
参与 Android 端项目 V2.0 框架设计和实现，基于 MVVM 框架的单 Activity 多 Fragment 结构，引入 Jetpack（Jetpack Architecture：Lifecycle、LiveData、ViewModel、Navigation DeepLink、BottomNavigationView 等）,加入 Kotlin 协程等特性；采用 Realm 数据库、RecyclerView 局部刷新等技术实现设备列表的添加和管理，主要连接的是 USB 设备和 Wifi 设备两大类，涉及 Jni、Jna 等技术，USB 方面涉及：libusb、libuvc，数据解析：JavaStruct/JStruct、Json/Gson、FasterXML Jason XmlMapper，利用公司 SDK 协议进行设备在线升级，通过 Retrofit2 OkHttp3 报警订阅 keep-alive 实现设备断开响应，预览画面涉及 YUV：libyuv/GYUV、I420/NV12/NV21、YUY2(YUYV)、NV16等，通过 CameraX 获取可见光，利用自定义 View&ViewGroup 手势绘制点、线和框，手势融合热成像和可见光双光，通过 OpenCV 画面上画 Logo、点、线和框等；图库通过 file 遍历方式获取，然后 Glide 加载图片作展现；最后设置页面是 flutter 实现的

设计模式：
观察者模式处理 usb 设备的整个响应逻辑，把细节封装在内部
工厂模式处理设备大类的接口兼容，然后使得行为基本一致
代理委托处理不同码流、不同版本兼容的一致逻辑

疑难问题：
偶现的预览画面在多种情况下可能出现黑屏的问题，播放和 USB 双方之间各种时序问题
线程内逻辑在部分手机中处理慢导致的画面卡慢，以及偶现的栈溢出异常
Jna 涉及的录像偶现闪退、预览偶现的绿屏问题、部分手机录像回放横条纹
 
## 【HIKMICRO Sight 微影户外】
项目简介：
是一款专门为户外打造的 App，可以连接户外手持设备，对设备内部画面进行实时传输，一键分享画面，提升户外体验感，预览画面包括预览变倍、射表十字、亮度、对比度、锐度等设置

技术描述：
参与 Android 端项目业务开发实现，通过 Room 数据库保存管理设备信息和图库信息两大类，利用 ViewPager2 横向展示设备，Glide 加载图片作图库展现，利用 Flurry 和 Firebase 进行业务埋点，通过扫码快速连接设备的 Wifi 热点，实现快速添加设备逻辑，通过自有 SADP Api 实现局域网内设备扫描快速得到设备 IP 供连接，通过将 2d 数组旋转的方式实现 Raw 数据画面角度的旋转，电子围栏等业务，通过自定义 View 拖动实现十字射表坐标下发，通过 Jni 代码调用公司自有依赖库实现预览画面 AI 超分，通过 Google Map Api 实现设备标记，捕猎区域等

# 【防疫宝】
项目简介：
防疫宝（原测温精灵），公司推出的满足疫情期间或日常特定场所防控需要的申报、筛查告警、人员车辆登记、进出备案等防疫防控的信息系统 App，配合三防手机使用，可解决在核酸、体温等筛查登记中使用的数据查询和录入等操作，可查询健康码、行程码、核酸检测结果和疫苗接种状态，开展未筛查报备，消息推送等功能，部分地区还支持直接扫健康码直接进行一码通行和备案场景

技术描述：
主导 Android 端项目框架实现，基于 MVVM 架构，采用多 Activity 和多 Fragment 的结构，引入 Jetpack, Kotlin 等特性，采用 AppSharedViewModel 实现 Activity 之间数据交互，采用 MQTT 技术实现即时消息推送，利用公司 SDK 和 NFC 相关 API 实现二代身份证在线识别，通过摄像头实现了身份证号的离线识别，同时实现了车牌号识别、人脸识别并标记（公司自有（传 Yuv）/mlkit-face-detection），然后通过 libusb jni 枚举设备然后调接口获取三防手机内置测温机芯设备进行额温测温，另外人脸识别测温和纯测温两套机制是对同一个套接口流程的各自的实现，并按结果是否进行告警语音播报并上报登记，通过利用 mlkit-barcode /CameraX 实现二维码的扫描功能，通过 Jetpack App Startup 提供 LibraryProvider 类随时随地提供 app 上下文供各种业务代码使用，刷身份证指引动画采用 apng 展示实现，通过 GuideView 实现功能导航指引，工作期间还采用了离线 Maven 仓库来解决海康内网的复杂环境导致的依赖问题

# 【电力巡检】
项目简介：
配合公司手持设备使用的 App，对电力系统设备进行定期巡查、检测维护和监控工作，通过 App 生成巡检任务并下发给设备，然后利用设备的热成像和可见光特性能够有助于及时发现并记录问题，设备归档阶段是将巡检过程中的所有数据和记录进行整理和保存上传给 App，然后 App 端用户对巡检结果进行验证，确保发现的问题得到妥善处理，以确保能够辅助电力系统的运维

技术描述：
主导 Android 端项目框架搭建，基于 MVVM 架构，引入 Jetpack（Jetpack Architecture：Lifecycle、LiveData、ViewModel、BottomNavigationView、NavigationView 等）, Kotlin 协程等特性，利用 ViewPager2 和 ImageLoader/Coil 展示 Cursor 查询形成的相册图库、实现单图拖动展示，通过 MediaStore API 处理系统相册相关数据，引入 FragmentAgent 理念，借助一个独立的 Fragment 处理系统权限和 Activity Result 两大功能，通过 Room 保存巡检数据，而任务是用 tar.gz 压缩打包后通过 Socket 传入给设备，两边数据通过 Crc32 进行核对校验，轻数据缓存采用 MMKV 和 SP 混合使用

# 【数字病房】
项目简介：
　　以智能信息交互显示终端（床旁智能终端、电子床头卡、走廊显示屏、病房门口屏、护士站主机、电子触控大屏等）为载体，实现患者、护士、医生等医务人员之间的信息即时互动（呼叫对讲，音视频宣教，费用查询，报告查询，点餐服务，待办提醒等）功能，提升患者就医体验

技术描述：
　　主导安卓端项目框架搭建实现，基于 MVVM 架构，引入 Jetpack、Kotlin、RxJava 等特性，利用 WebRTC 和 Socket.IO 技术实现音视频对讲，采用 MQTT 技术实现即时消息推送，针对视频在不同设备的表现，有解决过 UVC 摄像头取景，成像角度错乱、图像呈现绿色等问题，在音频处理方面，有进行一定程度上的回声消除、降噪处理，另外各个功能菜单及表单界面均通过解析 API 接口数据完成动态生成灵活展示，通过 AOP 之 AspectJ 切面编程方式完成埋点统计，通过自定义 View 实现备忘画板等功能，完成后续持续功能迭代，维护升级，性能调优等日常工作

# 【刷脸就医】
项目简介：
　　为了完善医院智慧就医服务，提供更加方便的就诊查询服务，利用机器系统辅助完成人脸注册、身份识别、人脸信息比对、人证信息匹配等，同时也提供了分诊导诊，挂号结算，流程查询，体温测量，医学科普，宣传教育，路径规划，药物配送等功能

技术描述：
　　主要负责完成安卓项目框架的搭建，基于 MVVM 架构，引入 Jetpack、Kotlin 、Hilt 和 Coil 等组件，实现了二代身份证的离线识别，人脸实时识别比对校验（公司自有/FaceDetector）等功能，利用 WebSocket 技术实现即时通信，利用 MQTT（Eclipse.Paho）完成消息推送功能，引入 Crosswalk 的 XWalkView 并改造后实现更完善的离线 WebView 功能，加入 Vosk 实现离线语音识别，引入蜂鸟视图实现室内导航，实现了语音合成播报，语义分析等，同时实现了音视频宣教，环境监测等功能

# 【移动护理】
项目简介：
　　针对护士在护理工作中的场景，利用无线手持设备终端（PDA）配合腕带、标签上的二维码，实现患者身份识别核对，床旁信息查询，录入各类护理文书（生命体征单、护理记录单、风险评估单等），扫码二次核对安全准确的执行医嘱，记录执行输液的过程，形成有效的医嘱闭环，辅助护士进行三查八对，提高护理的安全和效率，同时也实现了护理工作的可量化

技术描述：
　　主要负责业务需求功能的开发，针对原有项目进行大幅度重构调整，统一了代码风格，利用 ZXing 和 ZBar 实现了二维码扫描和生成的功能，利用 Vector 进行图标风格的统一，采用 MPAndroidChart 库进行一些图表的绘制，实现菜单以及大量表单 View 和表单数据校验逻辑的动态生成




